{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/obsever/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 工具方法\nexport function isObject(obj) {\n  return typeof obj === \"object\" && obj !== null;\n}\n","import { isObject } from \"../utils\";\n\nclass Observer {\n  constructor(data) {\n    this.walk(data);\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value);\n  Object.defineProperty(data, key, {\n    get() {\n      return value;\n    },\n    set(newVal) {\n      if (newVal == value) return;\n      observe(newVal); // 监控当前设置的值 因为设置的值也可能是个对象\n      value = newVal;\n    },\n  });\n}\n\nexport function observe(data) {\n  console.log(data);\n  // 如果不是对象就返回\n  if (!isObject(data)) {\n    return;\n  }\n  return new Observer(data);\n}\n","import { observe } from \"./obsever/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethods(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n}\n\nfunction initProps() {}\n\nfunction initMethods() {}\n\nfunction initData(vm) {\n  console.log(vm.$options.data);\n  // 数据响应式原理\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n  observe(data);\n}\n","import { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n\n    initState(vm);\n  };\n}\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue); // 添加原型方法\n\nexport default Vue;\n"],"names":["isObject","obj","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newVal","console","log","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;EAC5B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACD;;MCDKC;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAChB,SAAKC,IAAL,CAAUD,IAAV;EACD;;;;2BACIA,MAAM;EACTE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,GAAD,EAAS;EACjCC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGH,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCE,KAAnC,EAA0C;EACxCC,EAAAA,OAAO,CAACD,KAAD,CAAP;EACAL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA4BK,GAA5B,EAAiC;EAC/BK,IAAAA,GAD+B,iBACzB;EACJ,aAAOH,KAAP;EACD,KAH8B;EAI/BI,IAAAA,GAJ+B,eAI3BC,MAJ2B,EAInB;EACV,UAAIA,MAAM,IAAIL,KAAd,EAAqB;EACrBC,MAAAA,OAAO,CAACI,MAAD,CAAP,CAFU;;EAGVL,MAAAA,KAAK,GAAGK,MAAR;EACD;EAR8B,GAAjC;EAUD;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAC5Ba,EAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ,EAD4B;;EAG5B,MAAI,CAACH,QAAQ,CAACG,IAAD,CAAb,EAAqB;EACnB;EACD;;EACD,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EACD;;EChCM,SAASe,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACjB,IAAT,EAAe;EACbqB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;EACF;;EAMD,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EACpBH,EAAAA,OAAO,CAACC,GAAR,CAAYE,EAAE,CAACE,QAAH,CAAYlB,IAAxB,EADoB;;EAGpB,MAAIA,IAAI,GAAGgB,EAAE,CAACE,QAAH,CAAYlB,IAAvB;EACAA,EAAAA,IAAI,GAAGgB,EAAE,CAACM,KAAH,GAAW,OAAOtB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACuB,IAAL,CAAUP,EAAV,CAA7B,GAA6ChB,IAA/D;EACAQ,EAAAA,OAAO,CAACR,IAAD,CAAP;EACD;;ECvBM,SAASwB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd;EAEAb,IAAAA,SAAS,CAACC,EAAD,CAAT;EACD,GALD;EAMD;;ECPD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EACpB,OAAKD,KAAL,CAAWC,OAAX;EACD;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}